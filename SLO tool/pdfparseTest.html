<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">


<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
 <script type="text/javascript" src="libraries/jquery-easyui-1.4.2/jquery.easyui.min.js"></script>
  <script type="text/javascript" src="libraries/bootstrap-3.3.4-dist/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="libraries/pdfjs/js/pdf.js"></script>
  <script type="text/javascript" src="libraries/pdfjs/js/pdf.worker.js"></script>
 <script type="text/javascript" src="submit.js"></script>
 <script type="text/javascript" src="pdfexttract.js"></script>
 
 </head>
 <body>
 <input type='file' accept='text/plain' onchange='openFile(event)'><br>
 <script>
 function PdfToText(input){
      PDFJS.getDocument(input).then(function(pdf) {
		var total = pdf.numPages;
		var layers = {};        
     for (i = 1; i <= total; i++){
        pdf.getPage(i).then( function(page){
        var n = page.pageNumber;
        page.getTextContent().then( function(textContent){
          if( null != textContent.items ){
            var page_text = "";
            var last_block = null;
            for( var k = 0; k < textContent.items.length; k++ ){
                var block = textContent.items[k];
                if( last_block != null && last_block.str[last_block.str.length-1] != ' '){
                    if( block.x < last_block.x )
                        page_text += "\r\n"; 
                    else if ( last_block.y != block.y && ( last_block.str.match(/^(\s?[a-zA-Z])$|^(.+\s[a-zA-Z])$/) == null ))
                        page_text += ' ';
                }
                page_text += block.str;
                last_block = block;
				}
			return page_text;
			}
		}
	}
}
}
}
  var openFile = function(event) {
    var input = event.target;
	var pdfString=PdfToText(input.files[0])
	document.getElementById("test").value=pdfString;
}


	</script>
 <p id="test"> </p>
 </body>
 </html>